<div class="container">

<table style="width: 100%;"><tr>
<td>compound_figure</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Compound figure for decision support</h2>

<h3>Description</h3>

<p>Simple compound figure of model results and analyses of a binary decision 
(do or do not do). The figure includes the distribution of the expected outcome, 
the expected cashflow, as well as the variable importance and the value of information
</p>


<h3>Usage</h3>

<pre><code class="language-R">compound_figure(
  model = NULL,
  input_table,
  decision_var_name,
  cashflow_var_name,
  model_runs = 10000,
  distribution_method = "smooth_simple_overlay",
  mcSimulation_object = NULL,
  plsrResults = NULL,
  EVPIresults = NULL,
  x_axis_name_distribution = "Outcome distribution",
  y_axis_name_distribution = NULL,
  x_axis_name_cashflow = "Timeline of intervention",
  y_axis_name_cashflow = "Cashflow",
  legend_name_cashflow = "Quantiles (%)",
  legend_labels_cashflow = c("5 to 95", "25 to 75", "median"),
  x_axis_name_pls = "Variable Importance in Projection",
  y_axis_name_pls = NULL,
  legend_name_pls = "Coefficient",
  legend_labels_pls = c("Positive", "Negative"),
  x_axis_name_evpi = "Expected Value of Perfect Information",
  y_axis_name_evpi = NULL,
  base_size = 11
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>model</code></td>
<td>
<p>is a user defined model function see the <code>mcSimulation</code> function. Either 'model' or 'mcSimulation_object' must be provided. If both are given then 'model' has precedence and the model will be calculated for the figure</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>input_table</code></td>
<td>
<p>is a data frame with at least two columns named 'variable' and 'label'. The 'variable column should have one entry for the name of each variable contained in any of the plots. In preparing the figure, the function will replace the variable names with the labels. If the label is missing then the plot will show 'NA' in the place of the variable name. Default is NULL and uses the original variable names.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>decision_var_name</code></td>
<td>
<p>is the name of the decision outcome named in the <code>return()</code> of 'model'. This will be used in all plots and analyses except for the cashflow plot. For now this is just one decision option</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cashflow_var_name</code></td>
<td>
<p>is the name of the cashflow variable named in the <code>return()</code> of 'model'. This will be used in the cashflow plot</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model_runs</code></td>
<td>
<p>is the number of time that the model should run. The default is 10,000</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>distribution_method</code></td>
<td>
<p>is the method used in the distribution plot see the <code>plot_distributions</code> function</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mcSimulation_object</code></td>
<td>
<p>is an object of Monte Carlo simulation outputs from the <code>mcSimulation</code> function</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plsrResults</code></td>
<td>
<p>is an object of Projection to Latent Structures (PLS) regression outputs from the <code>plsr.mcSimulation</code> function</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>EVPIresults</code></td>
<td>
<p>are the results of the <code>multi_EVPI</code> function</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x_axis_name_distribution, y_axis_name_distribution, x_axis_name_cashflow, y_axis_name_cashflow, x_axis_name_pls, y_axis_name_pls, x_axis_name_evpi, y_axis_name_evpi</code></td>
<td>
<p>are the names (character strings) to pass to the axis titles for the respective plots (distribution, cashflow, pls, evpi)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legend_name_cashflow, legend_name_pls</code></td>
<td>
<p>are the names (character strings) representing the title of the legend</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legend_labels_cashflow, legend_labels_pls</code></td>
<td>
<p>are the names (character strings) representing the labels of the legend</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>base_size</code></td>
<td>
<p>is the base text size to be used for the plot. The default is 11, this is the <code>ggplot2::ggtheme</code> default</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>This function returns a plot of classes <code>'patchwork'</code>, <code>'gg'</code>, 
and <code>'ggplot'</code>. This allows the user to
continue editing some features of the plots through the syntax (i.e. <code>'&amp;'</code>,
and <code>'+'</code>) from both libraries.
</p>


<h3>Author(s)</h3>

<p>Eduardo Fernandez (<a href="mailto:efernand@uni-bonn.de">efernand@uni-bonn.de</a>)
</p>
<p>Cory Whitney (<a href="mailto:cory.whitney@uni-bonn.de">cory.whitney@uni-bonn.de</a>)
</p>


<h3>References</h3>

<p>Do, Hoa, Eike Luedeling, and Cory Whitney. “Decision Analysis of Agroforestry Options Reveals Adoption Risks for Resource-Poor Farmers.” Agronomy for Sustainable Development 40, no. 3 (June 2020): 20. <a href="https://doi.org/10.1007/s13593-020-00624-5">doi:10.1007/s13593-020-00624-5</a>.
Lanzanova, Denis, Cory Whitney, Keith Shepherd, and Eike Luedeling. “Improving Development Efficiency through Decision Analysis: Reservoir Protection in Burkina Faso.” Environmental Modelling &amp; Software 115 (May 1, 2019): 164–75. <a href="https://doi.org/10.1016/j.envsoft.2019.01.016">doi:10.1016/j.envsoft.2019.01.016</a>.
Ruett, Marius, Cory Whitney, and Eike Luedeling. “Model-Based Evaluation of Management Options in Ornamental Plant Nurseries.” Journal of Cleaner Production 271 (June 2020): 122653. <a href="https://doi.org/10.1016/j.jclepro.2020.122653">doi:10.1016/j.jclepro.2020.122653</a>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">##############################################################
# Example 1 (Creating the estimate from the command line):
#############################################################
# Create the estimate object:

cost_benefit_table &lt;- data.frame(label = c("Revenue", "Costs"),
                                  variable = c("revenue", "costs"),
                                  distribution = c("norm", "norm"),
                                  lower = c(100,  500),
                                  median = c(NA, NA),
                                  upper = c(10000, 5000))

# (a) Define the model function without name for the return value:

profit1 &lt;- function() {
  Decision &lt;- revenue - costs
  cashflow &lt;- rnorm(rep(revenue, 20))
  return(list(Revenues = revenue,
              Costs = costs, 
              cashflow = cashflow, 
              Decision = Decision))
}

compound_figure(model = profit1, 
input_table = cost_benefit_table, 
decision_var_name = "Decision",
cashflow_var_name = "cashflow",
model_runs = 1e2, 
distribution_method = 'smooth_simple_overlay')

</code></pre>


</div>