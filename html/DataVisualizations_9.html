<div class="container">

<table style="width: 100%;"><tr>
<td>Choroplethmap</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Plots the Choropleth Map
</h2>

<h3>Description</h3>

<p>A thematic map with areas colored in proportion to the measurement of the statistical variable being displayed on the map. A political map geneated by this function was used in the conference talk of the publication [Thrun/Ultsch, 2018].</p>


<h3>Usage</h3>

<pre><code class="language-R">Choroplethmap(Counts, PostalCodes, NumberOfBins = 0,

 Breaks4Intervals, percentiles = c(0.5, 0.95), 
 
 digits = 0, PostalCodesShapes, PlotIt = TRUE,

 DiscreteColors, HighColorContinuous = "red",

 LowColorContinuous = "deepskyblue1", NAcolor = "grey",

 ReferenceMap = FALSE, main = "Political Map of Germany",

 legend = "Range of values", Silent = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>Counts</code></td>
<td>

<p>vector [1:m], statistical variable being displayed
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>PostalCodes</code></td>
<td>

<p>vector[1:n], currently german postal codes (zip codes), if <code>PostalCodesShapes</code> is not changed manually, does not need to be unique
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>NumberOfBins</code></td>
<td>

<p>Default: 1; 1 or below continously changes the color as defined by the   package <code>choroplethr</code>.
A Number between 2 and 9 sets equally sized bins. Higher numbers are not allowed
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Breaks4Intervals</code></td>
<td>

<p>If NumberOfBins&gt;1 you can set here the intervals of the bins manually
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>percentiles</code></td>
<td>

<p>If NumberOfBins&gt;1 and Breaks4Intervals not set, then the percentiles of min and max bin can be set here. See also <code>quantile</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>digits</code></td>
<td>

<p>number of digits for <code>round</code>
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>PostalCodesShapes</code></td>
<td>

<p>Specially prepared shape file with postal codes and geographic boundaries.
If you set this object, then you can use non german zip codes.
You can see the required structure in map.df,  github trulia choroplethr blob master r chloropleth. 
The German PostalCodesShapes can be downloaded from <a href="https://github.com/Mthrun/DataVisualizations/tree/master/data">https://github.com/Mthrun/DataVisualizations/tree/master/data</a>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>PlotIt</code></td>
<td>

<p>Either Plot the map directly or change the object manually before plotting it
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>DiscreteColors</code></td>
<td>

<p>Set the discrete colors manually if NumberOfBins&gt;1, else it is ignored
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>HighColorContinuous</code></td>
<td>

<p>if NumberOfBins&lt;=1: color of highest continuous value, else it is ignored
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>LowColorContinuous</code></td>
<td>

<p>if NumberOfBins&lt;=1: color of lowest continuous value, else it is ignored
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>NAcolor</code></td>
<td>

<p>Color of NA values in the map (postal codes without any counts)
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ReferenceMap</code></td>
<td>

<p>TRUE: With Google map, FALSE: without Google map
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>main</code></td>
<td>

<p>title of plot
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legend</code></td>
<td>

<p>title of legend
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Silent</code></td>
<td>

<p>TRUE: disable warnings of <code>choroplethr</code> package
FALSE: enable  warnings of <code>choroplethr</code> package
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This wrapper for the <span class="pkg">choroplethr</span> enables to visualize a political map easily in the case of german zip codes based on given counts and postal codes. Other postal codes are in principle usable.
</p>


<h3>Value</h3>

<p>List of
</p>
<table>
<tr style="vertical-align: top;">
<td><code>chorR6obj</code></td>
<td>
<p>An R6 object of the package <code>choroplethr</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>DataFrame</code></td>
<td>
<p>Transformed PostalCodes and Counts in a way that they can be used in the package <code>choroplethr</code>.</p>
</td>
</tr>
</table>
<h3>Note</h3>

<p>You could read <a href="https://www.r-bloggers.com/2016/05/case-study-mapping-german-zip-codes-in-r/">https://www.r-bloggers.com/2016/05/case-study-mapping-german-zip-codes-in-r/</a>, if you want to change the map (<code>PostalCodesShapes</code> shape object).
</p>


<h3>Author(s)</h3>

<p>Michael Thrun
</p>


<h3>References</h3>

<p>[Thrun/Ultsch, 2018] Thrun, M. C., &amp; Ultsch, A. : Effects of the payout system of income taxes to municipalities in Germany, in Papiez, M. &amp; Smiech,, S. (eds.), Proc. 12th Professor Aleksander Zelias International Conference on Modelling and Forecasting of Socio-Economic Phenomena, pp. 533-542, Cracow: Foundation of the Cracow University of Economics, Cracow, Poland, 2018. 
</p>


<h3>See Also</h3>

<p>Google <code>choroplethr</code> package.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
#If you download the package from CRAN
## Not run: 
# 1. Step: Downlaod the shape file from the website 
# https://github.com/Mthrun/DataVisualizations/blob/master/data/GermanPostalCodesShapes.rda
# 2. Step: load it from the local path od the downloaded file with
load(file='GermanPostalCodesShapes.rda')

## End(Not run)

# If you download the package from GitHub, you can omit the two steps above.
# Then, do not use the 'PostalCodesShapes' input parameter

#Many postal codes are required to see a structure
#Exemplary two postal codes in the upper left corner of the map

## Not run: 
out=Choroplethmap(c(4,8,5,4),

c('49838', '26817', '49838', '26817'),

NumberOfBins=2,PlotIt=FALSE,
 PostalCodesShapes=GermanPostalCodesShapes)

out$chorR6obj$render()

## End(Not run)
#bins are only presented in the map if the have values within
## Not run: 
out=Choroplethmap(c(4,8,5,4),c('49838', '26817',

 '49838', '26817'),NumberOfBins=5,
 
 Breaks4Intervals=c(1,2,3,5,10),PlotIt=FALSE,
 PostalCodesShapes=GermanPostalCodesShapes)


out$chorR6obj$render()

## End(Not run)
# Result of [Thrun/Ultsch, 2018]
# Slightly misuse the function for visualizing a political map 
# resulting out of a clustering

## Not run: 
data('ChoroplethPostalCodesAndAGS_Germany')
res=Choroplethmap(as.numeric(ChoroplethPostalCodesAndAGS_Germany$Cls)+1,

ChoroplethPostalCodesAndAGS_Germany$PLZ,NumberOfBins = 2,

Breaks4Intervals = c(0,1,2,3,4,5,6),digits = 1,ReferenceMap = F,

DiscreteColors = c('white','green','blue','red','magenta'),

main = 'Classification of German Postal Codes based on Income Tax Share and Yield',

legend = 'ITS vs MTY Classification in 2010',NAcolor = 'black',PlotIt=FALSE,
 PostalCodesShapes=GermanPostalCodesShapes)


#takes time to process
res$chorR6obj$render()

## End(Not run)
</code></pre>


</div>