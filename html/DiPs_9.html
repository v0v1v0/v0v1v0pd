<div class="container">

<table style="width: 100%;"><tr>
<td>net</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Optimal near-fine match from a distance matrix.</h2>

<h3>Description</h3>

<p>The function creates the network for optimal near-fine matching to be passed via callrelax to the Fortran code for Bertsekas and Tseng's (1988) Relax IV.
</p>
<p>Of limited interest to most users; function netfine() would typically be called by some other functions.
</p>


<h3>Usage</h3>

<pre><code class="language-R">net(z, dist, ncontrol=1, fine=rep(1,length(z)),
      penalty=round(max(dist$d)*100), s.cost=100, subX=NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>z</code></td>
<td>
<p>A vector whose ith coordinate is 1 for a treated unit and is 0 for a control. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dist</code></td>
<td>
<p>A distance list with the starting node (treated subjec), ending node (control), the extra distance between them based on directional penalty.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ncontrol</code></td>
<td>
<p>A positive integer giving the number of controls to be matched to each treated subject.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fine</code></td>
<td>
<p>A vector of with length(z) = length(fine) giving the nominal levels that are to be nearly-finely balanced.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>penalty</code></td>
<td>
<p>A numeric penalty imposed for each violation of fine balance.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>s.cost</code></td>
<td>
<p>The scaling factor for cost of the each pair of treated and control while rounding the cost. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subX</code></td>
<td>
<p>If a subset matching is required, the variable that the subset matching is based on. That is, for each level of subX, extra treated will be discarded in order to have the number of matched treated subjects being the minimum size of treated and control groups. If exact matching on a variable x is desired and discarding extra treated is fine if there are more treated than controls for a certain level k, set exact = x, subX = x.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The network contains a bipartite graph for treated and control subjects plus additional nodes for fine balance categories, plus additional nodes accept needed deviations from fine balance yielding near-fine balance.
</p>
<p>For discussion of fine-balance, see Rosenbaum (1989, Section 3) and Rosenbaum (2010). For near-fine balance balance, see Yang et al. (2012).
</p>


<h3>Value</h3>

<p>A network for optimal near-fine matching.</p>


<h3>References</h3>

<p>Bertsekas, D. P. and Tseng, P. (1988) The relax codes for linear minimum cost
network flow problems. Annals of Operations Research, 13, 125-190.  Fortran
and C code: http://www.mit.edu/~dimitrib/home.html.  Available in R via the
optmatch package.
</p>
<p>Rosenbaum, P.R. (1989) Optimal matching in observational studies. Journal of
the American Statistical Association, 84, 1024-1032.
</p>
<p>Rosenbaum, P. R. (2010) Design of Observational Studies.  New York: Springer.
</p>
<p>Yang, D., Small, D. S., Silber, J. H., and Rosenbaum, P. R. (2012) Optimal
matching with minimal deviation from fine balance in a study of obesity and
surgical outcomes.  Biometrics, 68, 628-636.
</p>


</div>