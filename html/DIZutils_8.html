<div class="container">

<table style="width: 100%;"><tr>
<td>query_database</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>query_database helper function</h2>

<h3>Description</h3>

<p>Internal function to query the database. The function
sends a sql statement to the database and returns a data.table.
</p>


<h3>Usage</h3>

<pre><code class="language-R">query_database(
  db_con,
  sql_statement,
  no_result = FALSE,
  close_connection = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>db_con</code></td>
<td>
<p>A DBI database connection.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sql_statement</code></td>
<td>
<p>A character string containing a valid SQL statement.
Caution: Everything after the first ';' will be cut off.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>no_result</code></td>
<td>
<p>(boolean, default: FALSE) Is the sql meant to return
nothing? E.g. if you just insert or update a table.
Then supply 'TRUE' here. If you supply 'FALSE' here, the
function expects to receive a result table and tries to convert it
to a data.table.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>close_connection</code></td>
<td>
<p>(boolean, default = FALSE). If TRUE, the connection
will be closed after the query was sent and the result received.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Returns the result of the db-query. If 'no_result' is 'TRUE',
the return value will be 'TRUE' if the query was successfully sent.
Otherwise (if 'no_result' is 'FALSE' which is the default), the result
will be the result of the sql query as data.table.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
db_con &lt;- DIZutils::db_connection(
  db_name = "i2b2",
  db_type = "postgres"
)

query_database(
  db_con = db_con,
  sql_statement = "SELECT * FROM table_name;"
)

query_database(
  db_con = db_con,
  sql_statement = "INSERT INTO table_name DEFAULT VALUES;",
  no_result = TRUE
)


## End(Not run)

</code></pre>


</div>