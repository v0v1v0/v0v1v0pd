<div class="container">

<table style="width: 100%;"><tr>
<td>impute_duration</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Replace missing or implausible prescription durations</h2>

<h3>Description</h3>

<p>Instead of replacing missing stop dates, we impute the durations and then
infer the stop dates from there.
</p>


<h3>Usage</h3>

<pre><code class="language-R">impute_duration(
  data,
  method,
  where = is.na,
  group = c("patid", "start_date"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A data frame containing columns <code>prodcode</code>, <code>pracid</code>, <code>patid</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>Method for imputing the values. See details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>where</code></td>
<td>
<p>Logical vector, or function applied to <code>variable</code> returning such a vector, indicating which elements to impute. Defaults to <code>is.na</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>group</code></td>
<td>
<p>Level of structure for imputation. Defaults to whole study population.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Extra arguments, currently ignored</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>We can fix clashing start dates by setting <code>group</code> to <code>start_date</code>
and <code>patid</code>, i.e. average over groups with more than one member;
any metric should return the original values if the group size is one.
</p>


<h3>Value</h3>

<p>A data frame of the same structure as <code>data</code>, with values imputed
</p>


<h3>Examples</h3>

<pre><code class="language-R">example_duration &lt;- transform(example_therapy, duration = qty / ndd)
impute_duration(example_duration, method = 'mean', group = 'patid')

</code></pre>


</div>