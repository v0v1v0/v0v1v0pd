<div class="container">

<table style="width: 100%;"><tr>
<td>doctest-package</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Write testthat tests for your examples, using roxygen tags</h2>

<h3>Description</h3>

<p>The doctest package lets you test the code in your "Examples"
section in .Rd files. It uses the roxygen2 and testthat packages.
For more information, see @doctest and @expect.
</p>


<h3>Details</h3>



<h4>Example</h4>

<p>Here's some <a href="https://roxygen2.r-lib.org">roxygen</a> documentation for a function:
</p>
<div class="sourceCode r"><pre>
#' Fibonacci function 
#' 
#' @param n Integer
#' @return The nth Fibonacci number
#' 
#' @doctest
#'
#' @expect type("integer")
#' fib(2)
#'
#' n &lt;- 6 
#' @expect equal(8)
#' fib(n)
#' 
#' @expect warning("not numeric")
#' fib("a")
#'
#' @expect warning("NA")
#' fib(NA)
fib &lt;- function (n) {
  if (! is.numeric(n)) warning("n is not numeric")
  ...
}
</pre></div>
<p>Instead of an <code style="white-space: pre;">⁠@examples⁠</code> section, we have a <code style="white-space: pre;">⁠@doctest⁠</code> section.
</p>
<p>This will create tests like:
</p>
<div class="sourceCode"><pre># Generated by doctest: do not edit by hand
# Please edit file in R/&lt;text&gt;

test_that("Doctest: fib", {
  # Created from @doctest for `fib`
  # Source file: &lt;text&gt;
  # Source line: 7
  expect_type(fib(2), "integer")
  n &lt;- 6
  expect_equal(fib(n), 8)
  expect_warning(fib("a"), "not numeric")
  expect_warning(fib(NA), "NA")
})
</pre></div>
<p>The .Rd file will be created as normal, with an example section like:
</p>
<div class="sourceCode"><pre>\examples{
fib(2)

n &lt;- 6 
fib(n)
fib("a")
fib(NA)
}
</pre></div>



<h4>Usage</h4>

<p>Install doctest from <a href="https://r-universe.dev">r-universe</a>:
</p>
<div class="sourceCode r"><pre>install.packages("doctest", repos = c("https://hughjonesd.r-universe.dev", 
                                      "https://cloud.r-project.org"))
</pre></div>
<p>Or from CRAN:
</p>
<div class="sourceCode r"><pre>install.packages("doctest")
</pre></div>
<p>Or get the development version:
</p>
<div class="sourceCode r"><pre>devtools::install("hughjonesd/doctest")
</pre></div>
<p>To use doctest in your package, alter its DESCRIPTION file to add the
<code>dt_roclet</code> roclet and <code>"doctest"</code> package to roxygen:
</p>
<div class="sourceCode r"><pre>Roxygen: list(roclets = c("collate", "rd", "namespace", 
              "doctest::dt_roclet"), packages = "doctest") 
</pre></div>
<p>Then use <code>roxygen2::roxygenize()</code> or <code>devtools::document()</code> to build
your package documentation.
</p>
<p>Doctest is <a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt="[Experimental]"></a>.
</p>



<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: David Hugh-Jones <a href="mailto:davidhughjones@gmail.com">davidhughjones@gmail.com</a>
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://hughjonesd.github.io/doctest/">https://hughjonesd.github.io/doctest/</a>
</p>
</li>
<li>
<p> Report bugs at <a href="https://github.com/hughjonesd/doctest/issues">https://github.com/hughjonesd/doctest/issues</a>
</p>
</li>
</ul>
</div>