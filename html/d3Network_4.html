<div class="container">

<table style="width: 100%;"><tr>
<td>d3Sankey</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create a D3 JavaScript Sankey diagram</h2>

<h3>Description</h3>

<p>Create a D3 JavaScript Sankey diagram
</p>


<h3>Usage</h3>

<pre><code class="language-R">d3Sankey(Links, Nodes, Source, Target, Value = NULL, NodeID, height = 600,
  width = 900, fontsize = 7, nodeWidth = 15, nodePadding = 10,
  parentElement = "body", standAlone = TRUE, file = NULL,
  iframe = FALSE, d3Script = "http://d3js.org/d3.v3.min.js")
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>Links</code></td>
<td>
<p>a data frame object with the links between the nodes. It should
have include the <code>Source</code> and <code>Target</code> for each link. An optional
<code>Value</code> variable can be included to specify how close the nodes are to
one another.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Nodes</code></td>
<td>
<p>a data frame containing the node id and properties of the nodes.
If no ID is specified then the nodes must be in the same order as the
<code>Source</code> variable column in the <code>Links</code> data frame. Currently only
grouping variable is allowed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Source</code></td>
<td>
<p>character string naming the network source variable in the
<code>Links</code> data frame.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Target</code></td>
<td>
<p>character string naming the network target variable in the
<code>Links</code> data frame.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Value</code></td>
<td>
<p>character string naming the variable in the <code>Links</code> data
frame for how far away the nodes are from one another.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>NodeID</code></td>
<td>
<p>character string specifying the node IDs in the <code>Nodes</code>
data frame.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>height</code></td>
<td>
<p>numeric height for the network graph's frame area in pixels.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>width</code></td>
<td>
<p>numeric width for the network graph's frame area in pixels.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fontsize</code></td>
<td>
<p>numeric font size in pixels for the node text labels.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nodeWidth</code></td>
<td>
<p>numeric width of each node.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nodePadding</code></td>
<td>
<p>numeric essentially influences the width height.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>parentElement</code></td>
<td>
<p>character string specifying the parent element for the
resulting svg network graph. This effectively allows the user to specify
where on the html page the graph will be placed. By default the parent
element is <code>body</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>standAlone</code></td>
<td>
<p>logical, whether or not to return a complete HTML document
(with head and foot) or just the script.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>file</code></td>
<td>
<p>a character string of the file name to save the resulting graph.
If a file name is given a standalone webpage is created, i.e. with a header
and footer. If <code>file = NULL</code> then result is returned to the console.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>iframe</code></td>
<td>
<p>logical. If <code>iframe = TRUE</code> then the graph is saved to an
external file in the working directory and an HTML <code>iframe</code> linking to
the file is printed to the console. This is useful if you are using Slidify
and many other HTML slideshow framworks and want to include the graph in the
resulting page. If you set the knitr code chunk <code>results='asis'</code> then
the graph will be rendered in the output. Usually, you can use
<code>iframe = FALSE</code> if you are creating simple knitr Markdown or HTML
pages. Note: you do not need to specify the file name if
<code>iframe = TRUE</code>, however if you do, do not include the file path.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>d3Script</code></td>
<td>
<p>a character string that allows you to specify the location of
the d3.js script you would like to use. The default is
<a href="http://d3js.org/d3.v3.min.js">http://d3js.org/d3.v3.min.js</a>.</p>
</td>
</tr>
</table>
<h3>Source</h3>

<p>D3.js was created by Michael Bostock. See <a href="http://d3js.org/">http://d3js.org/</a> and, more specifically for Sankey diagrams <a href="http://bost.ocks.org/mike/sankey/">http://bost.ocks.org/mike/sankey/</a>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# Recreate Bostock Sankey diagram: http://bost.ocks.org/mike/sankey/
# Load energy projection data
library(RCurl)
URL &lt;- "https://raw.githubusercontent.com/christophergandrud/d3Network/sankey/JSONdata/energy.json"
Energy &lt;- getURL(URL, ssl.verifypeer = FALSE)
# Convert to data frame
EngLinks &lt;- JSONtoDF(jsonStr = Energy, array = "links")
EngNodes &lt;- JSONtoDF(jsonStr = Energy, array = "nodes")

# Plot
d3Sankey(Links = EngLinks, Nodes = EngNodes, Source = "source",
         Target = "target", Value = "value", NodeID = "name",
         fontsize = 12, nodeWidth = 30, file = "~/Desktop/TestSankey.html")

## End(Not run)
</code></pre>


</div>