<div class="container">

<table style="width: 100%;"><tr>
<td>clean_duration</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Clean implausibly-long prescription durations</h2>

<h3>Description</h3>

<p>Given a prescription length limit, truncate any prescriptions that appear to
be longer than this, or mark them as missing.
</p>


<h3>Usage</h3>

<pre><code class="language-R">clean_duration(data, max_months = Inf, method = c("truncate", "remove"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A data frame containing a column called <code>duration</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_months</code></td>
<td>
<p>The maximum plausible prescription length in months</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>Either 'truncate' or 'remove'. See details</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The method 'truncate' causes any duration longer than <code>max_months</code> to
be replaced with the value of <code>max_months</code> (albeit converted to days).
The method 'remove' causes such durations to be replaced with <code>NA</code>.
There is no explicit 'ignore' method, but if you want to 'do nothing', simply
set <code>max_months</code> to an arbitrarily high number.
By default, the maximum is infinite, so nothing should happen.
(Of course, you could also just <em>not</em> run the function...)
</p>


<h3>Value</h3>

<p>A data frame of the same structure as the input, possibly with some elements of the <code>duration</code> column changed
</p>


<h3>Note</h3>

<p>Currently the variable name is hard-coded as 'duration', but in
principle this could be parametrised for datasets where the column has a
different name.
</p>


<h3>Examples</h3>

<pre><code class="language-R">long_presc &lt;- data.frame(duration = c(100, 300, 400, 800))
clean_duration(long_presc, 6)
clean_duration(long_presc, 12, 'remove')

</code></pre>


</div>