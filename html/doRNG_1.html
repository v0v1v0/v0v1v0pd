<div class="container">

<table style="width: 100%;"><tr>
<td>doRNG-package</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Generic Reproducible Parallel Backend for foreach Loops</h2>

<h3>Description</h3>

<p>The <em>doRNG</em> package provides functions to perform
reproducible parallel foreach loops, using independent random streams
as generated by L'Ecuyer's combined multiple-recursive generator (L'Ecuyer (1999)).
It enables to easily convert standard %dopar% loops into fully reproducible loops,
independently of the number of workers, the task scheduling strategy,
or the chosen parallel environment and associated foreach backend.
It has been tested with the following foreach backend: doMC, doSNOW, doMPI.
</p>


<h3>References</h3>

<p>L'Ecuyer P (1999). “Good Parameters and Implementations for Combined Multiple Recursive Random Number Generators.” _Operations Research_, *47*(1), 159-164. ISSN
0030-364X, doi:10.1287/opre.47.1.159 &lt;https://doi.org/10.1287/opre.47.1.159&gt;.
</p>


<h3>See Also</h3>

<p><code>doRNG</code>, <code>RNGseq</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# register parallel backend
library(doParallel)
cl &lt;- makeCluster(2)
registerDoParallel(cl)

## standard %dopar% loop are not reproducible
set.seed(123)
r1 &lt;- foreach(i=1:4) %dopar%{ runif(1) }
set.seed(123)
r2 &lt;- foreach(i=1:4) %dopar%{ runif(1) }
identical(r1, r2)


## %dorng% loops _are_ reproducible
set.seed(123)
r1 &lt;- foreach(i=1:4) %dorng%{ runif(1) }
set.seed(123)
r2 &lt;- foreach(i=1:4) %dorng%{ runif(1) }
identical(r1, r2)


# alternative way of seeding 
a1 &lt;- foreach(i=1:4, .options.RNG=123) %dorng%{ runif(1) }
a2 &lt;- foreach(i=1:4, .options.RNG=123) %dorng%{ runif(1) }
identical(a1, a2) &amp;&amp; identical(a1, r1)


## sequences of %dorng% loops _are_ reproducible
set.seed(123)
s1 &lt;- foreach(i=1:4) %dorng%{ runif(1) }
s2 &lt;- foreach(i=1:4) %dorng%{ runif(1) }
identical(s1, r1) &amp;&amp; !identical(s1, s2)


set.seed(123)
s1.2 &lt;- foreach(i=1:4) %dorng%{ runif(1) }
s2.2 &lt;- foreach(i=1:4) %dorng%{ runif(1) }
identical(s1, s1.2) &amp;&amp; identical(s2, s2.2)

 
## Non-invasive way of converting %dopar% loops into reproducible loops
registerDoRNG(123)
s3 &lt;- foreach(i=1:4) %dopar%{ runif(1) }
s4 &lt;- foreach(i=1:4) %dopar%{ runif(1) }
identical(s3, s1) &amp;&amp; identical(s4, s2)


stopCluster(cl) 

</code></pre>


</div>