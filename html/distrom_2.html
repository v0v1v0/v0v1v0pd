<div class="container">

<table style="width: 100%;"><tr>
<td>collapse</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Data checking and binning</h2>

<h3>Description</h3>

<p>Collapses counts along equal levels of binned covariates.</p>


<h3>Usage</h3>

<pre><code class="language-R">collapse(v,counts,mu=NULL,bins=NULL)</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>v</code></td>
<td>
<p>Either matrix or Matrix of covariates (matches <code>covars</code> in <code>dmr</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>counts</code></td>
<td>
<p>Either matrix or Matrix of multinomial counts, or a factor (matches <code>counts</code> in <code>dmr</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mu</code></td>
<td>
<p>Possible pre-specified fixed effects for <code>dmr</code>; otherwise they are calculated here.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bins</code></td>
<td>
<p>The number of quantile bins into which we collapse <code>v</code>.  <code>bins=NULL</code> does no collapsing. </p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>For each column of <code>v</code>, aggregates
the observations into <code>bins</code>  defined by their average value.  Both <code>v</code> and <code>counts</code> are then collapsed according to levels of the interaction across implied bin-factors, and the number
of observations in each bin is recorded as <code>n</code>.  Look at the code of the <code>dmr</code> function to see <code>collapse</code> used in practice.
</p>


<h3>Value</h3>

<p>A list containing collapsed and formatted <code>v</code>, <code>counts</code>, and <code>nbin</code>, along with <code>mu = log(rowSums(counts))</code>, the plug-in fixed effect estimates for dmr.</p>


<h3>Author(s)</h3>

<p>Matt Taddy <a href="mailto:mataddy@gmail.com">mataddy@gmail.com</a>
</p>


<h3>See Also</h3>

<p>we8there</p>


</div>