<div class="container">

<table style="width: 100%;"><tr>
<td>scrolling_spectro</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create scrolling dynamic spectrograms</h2>

<h3>Description</h3>

<p><code>scrolling_spectro</code> create videos of single row spectrograms scrolling from right to left sync'ed with sound.
</p>


<h3>Usage</h3>

<pre><code class="language-R">scrolling_spectro(wave, file.name = "scroll.spectro.mp4", hop.size = 11.6, wl = NULL, 
ovlp = 70, flim = NULL, pal = seewave::reverse.gray.colors.1, speed = 1, fps = 50, 
t.display = 1.5, fix.time = TRUE, res = 70, 
width = 700, height = 400, parallel = 1, pb = TRUE,
 play = TRUE, loop = 1, lcol = "#07889B99", 
 lty = 2, lwd = 2, axis.type = "standard", buffer = 1, 
 ggspectro = FALSE, lower.spectro = TRUE, height.prop = c(5, 1), derivative = FALSE, 
 osc = FALSE, colwave = "black", colbg = "white",
 spectro.call = NULL, annotation.call = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>wave</code></td>
<td>
<p>object of class 'Wave'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>file.name</code></td>
<td>
<p>Character string with the name of the output video file. Must include the .mp4 extension. Default is 'scroll.spectro.mp4'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hop.size</code></td>
<td>
<p>A numeric vector of length 1 specifying the time window duration (in ms). Default is 11.6 ms, which is equivalent to 512 wl for a 44.1 kHz sampling rate. Ignored if 'wl' is supplied.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wl</code></td>
<td>
<p>A numeric vector of length 1 specifying the window length of the spectrogram, default 
is NULL. If supplied, 'hop.size' is ignored.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ovlp</code></td>
<td>
<p>Numeric vector of length 1 specifying the percent overlap between two 
consecutive windows, as in <code>spectro</code>. Default is 70.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>flim</code></td>
<td>
<p>A numeric vector of length 2 specifying  limits in the frequency axis (in kHz). Default is <code>NULL</code> (which means from 0 to Nyquist frequency).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pal</code></td>
<td>
<p>Character string with the color palette to be used. Default is 'reverse.gray.colors.1'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>speed</code></td>
<td>
<p>Numeric vector of length 1 indicating the speed at which the sound file will be reproduced (default is 1, normal speed). Values &lt; 1 (but higher than 0) slow down while values &gt; 1 speed up. Note that changes in speed are achieved by modifying the number of frames per second in the output video. Hence, you may want to adjust 'fps' if video quality is considerably affected.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fps</code></td>
<td>
<p>Numeric vector of length 1 specifying the number of frames per second.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>t.display</code></td>
<td>
<p>Numeric vector of length 1 specifying the time range displayed in the spectrogram.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fix.time</code></td>
<td>
<p>Logical argument to control if the time axis moves along with the spectrogram or remains fixed. Default is <code>TRUE</code> (fixed).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>res</code></td>
<td>
<p>Numeric vector of length 1 specifying the resolution of the image files (see <code>png</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>width</code></td>
<td>
<p>Numeric vector of length 1 specifying width of the video frame in pixels (see <code>png</code>). Default is 700.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>height</code></td>
<td>
<p>Numeric vector of length 1 specifying height of the video frame in pixels (see <code>png</code>). Default is 400.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>parallel</code></td>
<td>
<p>Numeric vector of length 1. Controls whether parallel computing is applied by specifying the number of cores to be used. Default is 1 (i.e. no parallel computing).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pb</code></td>
<td>
<p>Logical argument to control if progress bar is shown. Default is <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>play</code></td>
<td>
<p>Logical argument to control if the video is played after generated. Default is <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>loop</code></td>
<td>
<p>Logical argument to control if the video is formatted to be played in a loop (i.e. if ends at the start of the clip).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lcol</code></td>
<td>
<p>Character string with the color to be used for the vertical line at which sounds are played. Default is <code>"#07889B99"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lty</code></td>
<td>
<p>Character string to control the type of the line at which sounds are played. Line types can either be specified as an integer (0=blank, 1=solid (default), 2=dashed, 3=dotted, 4=dotdash, 5=longdash, 6=twodash) or as one of the character strings "blank", "solid", "dashed", "dotted", "dotdash", "longdash", or "twodash", where "blank" uses 'invisible lines' (i.e., does not draw them).Default is 2.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lwd</code></td>
<td>
<p>Character string to control the width of the line at which sounds are played. Default is 2.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>axis.type</code></td>
<td>
<p>Character string to control the style of spectrogram axes. Currently there are 3 options:
</p>

<ul>
<li> <p><code>standard</code>: Both Y and X axes are printed as in the default <code>spectro</code> view. 
</p>
</li>
<li> <p><code>minimal</code>: Single lines are used to denote the range defined by 1 s and 1 kHz for the X and Y axes respectively.
</p>
</li>
<li> <p><code>none</code>: No axis is printed (also removes ticks, tick labels, and axis labels).
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>buffer</code></td>
<td>
<p>Numeric vector of length 1 (&gt; 0) specifying the time to delay the start of the spectrogram scrolling (in seconds). Default is 1. Not available when loop is &gt; 1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ggspectro</code></td>
<td>
<p>Logical argument to control if a ggspectro (<code>ggspectro</code>) is used instead. Note that there is much less control on display parameters when <code>ggpsectro = TRUE</code>. Default is <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lower.spectro</code></td>
<td>
<p>Logical argument to control if a spectrogram of the full wave object is plotted at the bottom of the graph. Default is <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>height.prop</code></td>
<td>
<p>Numeric vector of length 2 to control the relative height of the scrolling and lower spectro, respectively. Default is <code>c(5, 1)</code>. Ignored if <code>lower.spectro = FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>derivative</code></td>
<td>
<p>Logical argument to control if spectral derivative is used instead of spectrogram (as in Sound Analysis Pro, see <code>deriche</code>). Default is <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>osc</code></td>
<td>
<p>Logical argument to control if the oscillogram is plotted at the bottom of the spectrogram. Default is <code>FALSE</code>. Note that 'osc' and 'lower.spectro' are mutually exclusive.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>colwave</code></td>
<td>
<p>Character string to control the color of the oscillogram. Default is 'black'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>colbg</code></td>
<td>
<p>Character string to control the background color. Default is 'white'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>spectro.call</code></td>
<td>
<p>A call from a spectrogram creating function (i.e. <code>spectro</code>, <code>color_spectro</code>) generated by the function <code>call</code>. This call will replace the internal spectrogram creating call. Default is <code>NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>annotation.call</code></td>
<td>
<p>A call from <code>text</code> generated by the function <code>call</code>. The call should also include the argmuents 'start' and 'end' to indicate the time at which the labels are displayed (in s).'fading' is optional and allows fade-in and fade-out effects on labels (in s as well). The position ('x' and 'y' arguments) should be between 0 and 1: <code>x = 0, y = 0</code> corresponds to the bottom left and <code>x = 1, y = 1</code> corresponds to the top right position.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments to be passed to <code>spectro</code> for customizing spectrograms. Note that 'scale' cannot be included.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The function creates videos (mp4 format) of single row spectrograms scrolling from right to left. The audio is sync'ed with the spectrograms. Sound files with a sampling rate other than 44.1 kHz will be resampled to 44.1 kHz as required by ffmpeg when embeding audio to video files.
</p>


<h3>Value</h3>

<p>A video file in mp4 format in the working directory with the scrolling spectrogram.
</p>


<h3>Author(s)</h3>

<p>Marcelo Araya-Salas (<a href="mailto:marcelo.araya@ucr.ac.cr">marcelo.araya@ucr.ac.cr</a>)
</p>


<h3>References</h3>


<p>Araya-Salas M &amp; Wilkins M R. (2020). dynaSpec: dynamic spectrogram visualizations in R. R package version 1.0.0.

</p>


<h3>See Also</h3>

<p><code>spectro</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# load example data
data(list = c("Phae.long1"))

# run function
scrolling_spectro(wave = Phae.long1, wl = 300, ovlp = 90, 
fps = 50, t.display = 1.5, collevels = seq(-40, 0, 5),
 pal = reverse.heat.colors, grid = FALSE, flim = c(1, 10), 
 res = 120)

## End(Not run)

</code></pre>


</div>