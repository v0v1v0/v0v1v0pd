<div class="container">

<table style="width: 100%;"><tr>
<td>db_connection</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>db_connection helper function</h2>

<h3>Description</h3>

<p>Internal function to test and get the database connection of
the target data system.
</p>


<h3>Usage</h3>

<pre><code class="language-R">db_connection(
  system_name = NULL,
  db_type,
  headless = TRUE,
  from_env = TRUE,
  settings = NULL,
  timeout = 30,
  logfile_dir = NULL,
  lib_path = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>system_name</code></td>
<td>
<p>(Default = NULL) A character. Name of the database system.
Used to find the correct settings from the env. If you don't want to
load the settings from the environment, use the 'settings' parameter.
Otherwise this funcion will search for all settings beginning with
'system_name' in the environment. If 'system_name = "i2b2"' settings like
'I2B2_HOST' or 'I2B2_PORT' (notice the uppercase) will be loaded from
the environment. You can load such an env file e.g. by using
'DIZtools::setenv_file(path_to_file)'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>db_type</code></td>
<td>
<p>A character. Type of the database system. Currently
implemented systems are: 'postgres', 'oracle'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>headless</code></td>
<td>
<p>A boolean (default: 'FALSE'). Indicating, if the function is
run only in the console ('headless = TRUE') or on a GUI frontend
('headless = FALSE').</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>from_env</code></td>
<td>
<p>A boolean (default: 'TRUE'). Should database connection
be read from the environment or from a settings file. All necessary
parameters must be uppercase and have the prefix of the db_name. E.g.:
'I2B2_HOST' or 'I2B2_PORT'. See the 'settings' parameter for all
necessary variables.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>settings</code></td>
<td>
<p>A list. Required if 'from_env == FALSE'. A list containing
settings for the database connection. Required fields are 'host',
'db_name', 'port', 'user' and 'password'.
Additionally for Oracle DB's: 'sid' (instead of 'db_name').
If 'settings' is set, 'from_env' will be set to 'FALSE' automatically.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timeout</code></td>
<td>
<p>A timeout in sec. for the db-connection establishment.
Values below 2 seconds are not recommended.
Default is 30 seconds.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>logfile_dir</code></td>
<td>
<p>(Optional, String, default: "tempdir()")
The absolute path to folder where the logfile will be stored.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lib_path</code></td>
<td>
<p>A character string. The path to the ojdbc*.jar file.
If you run one of the R-containers from the UK-Erlangen DIZ, there
might be a lib for oracle here: 'lib_path = "/opt/libs/ojdbc8.jar"'</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>If successful, the result will be the established connection.
Otherwise the result will be null.
</p>


<h3>See Also</h3>


<p><code>dbConnect</code>, <code>RPostgres</code>

</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
db_con &lt;- DIZutils::db_connection(
  db_name = "i2b2",
  db_type = "postgres"
)
## End(Not run)

</code></pre>


</div>