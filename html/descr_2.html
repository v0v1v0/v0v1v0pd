<div class="container">

<table style="width: 100%;"><tr>
<td>crosstab</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Cross tabulation with mosaic plot</h2>

<h3>Description</h3>

<p>This function is a wrapper for <code>CrossTable</code>, adding a
mosaic plot and making it easier to do a weighted cross-tabulation.
</p>


<h3>Usage</h3>

<pre><code class="language-R">crosstab(dep, indep, weight = NULL,
         digits = list(expected = 1, prop = 3, percent = 1, others = 3),
         max.width = NA,
         expected = FALSE, prop.r = FALSE, prop.c = FALSE, prop.t = FALSE,
         prop.chisq = FALSE, chisq = FALSE, fisher = FALSE, mcnemar = FALSE,
         resid = FALSE, sresid = FALSE, asresid = FALSE,
         missing.include = FALSE, drop.levels = TRUE, format = "SPSS",
         cell.layout = TRUE, row.labels = !cell.layout,
         percent = (format == "SPSS" &amp;&amp; !row.labels),
         total.r, total.c, dnn = "label", xlab = NULL,
         ylab = NULL, main = "", user.missing.dep, user.missing.indep,
         plot = getOption("descr.plot"), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dep, indep</code></td>
<td>
<p>Vectors in a matrix or a dataframe. <code>dep</code> should be
the dependent variable, and <code>indep</code> should be the independent one.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weight</code></td>
<td>
<p>An optional vector for a weighted cross tabulation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>digits</code></td>
<td>
<p>See <code>CrossTable</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max.width</code></td>
<td>
<p>See <code>CrossTable</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>expected</code></td>
<td>
<p>See <code>CrossTable</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prop.r</code></td>
<td>
<p>See <code>CrossTable</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prop.c</code></td>
<td>
<p>See <code>CrossTable</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prop.t</code></td>
<td>
<p>See <code>CrossTable</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prop.chisq</code></td>
<td>
<p>See <code>CrossTable</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>chisq</code></td>
<td>
<p>See <code>CrossTable</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fisher</code></td>
<td>
<p>See <code>CrossTable</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mcnemar</code></td>
<td>
<p>See <code>CrossTable</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>resid</code></td>
<td>
<p>See <code>CrossTable</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sresid</code></td>
<td>
<p>See <code>CrossTable</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>asresid</code></td>
<td>
<p>See <code>CrossTable</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>missing.include</code></td>
<td>
<p>See <code>CrossTable</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>drop.levels</code></td>
<td>
<p>See <code>CrossTable</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>format</code></td>
<td>
<p>See <code>CrossTable</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cell.layout</code></td>
<td>
<p>See <code>CrossTable</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>row.labels</code></td>
<td>
<p>See <code>CrossTable</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>percent</code></td>
<td>
<p>See <code>CrossTable</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>total.r</code></td>
<td>
<p>See <code>CrossTable</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>total.c</code></td>
<td>
<p>See <code>CrossTable</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dnn</code></td>
<td>
<p>See <code>CrossTable</code>. If <code>dnn = "label"</code>, then the
‘<span class="samp">⁠"label"⁠</span>’ attribute of ‘<span class="samp">⁠dep⁠</span>’ and ‘<span class="samp">⁠indep⁠</span>’ will be used as
the dimension names.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlab</code></td>
<td>
<p>See <code>plot.default</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylab</code></td>
<td>
<p>See <code>plot.default</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>main</code></td>
<td>
<p>An overall title for the plot (see
<code>plot.default</code> and <code>title</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>user.missing.dep</code></td>
<td>
<p>An optional character vector with the levels of
<code>dep</code> that should be treated as missing values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>user.missing.indep</code></td>
<td>
<p>An optional character vector with the levels of
<code>indep</code> that should be treated as missing values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot</code></td>
<td>
<p>Logical: if <code>TRUE</code> (default), a mosaic plot is produced.
You may put
</p>
<p><code>options(descr.plot = FALSE)</code>
</p>
<p>in your ‘<span class="file">.Rprofile</span>’ to change the default function behavior.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Further arguments to be passed to
<code>mosaicplot</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>crosstab</code> invokes the <code>CrossTable</code> with all boolean
options set to <code>FALSE</code> and <code>"SPSS"</code> as the default <code>format</code>
option. The returned CrossTable object can be plotted as a
<code>mosaicplot</code>. Note that the gray scale colors used by
default in the mosaic plot do not have any statistical meaning. The colors
are used only to ease the plot interpretation.
</p>
<p>Differently from <code>CrossTable</code>, this function requires both
<code>dep</code> and <code>indep</code> arguments. If you want an univariate tabulation,
you should try either <code>CrossTable</code> or <code>freq</code>.
</p>
<p>By default, if <code>weight</code> has decimals, the result of <code>xtabs</code> is
rounded before being passed to <code>CrossTable</code>. If you prefer that
the results are not rounded, add to your code:
</p>
<p><code>options(descr.round.xtabs = FALSE)</code>
</p>


<h3>Author(s)</h3>

<p>Jakson A. Aquino <a href="mailto:jalvesaq@gmail.com">jalvesaq@gmail.com</a></p>


<h3>See Also</h3>

<p><code>CrossTable</code>, <code>plot.CrossTable</code>,
<code>xtable.CrossTable</code>.</p>


<h3>Examples</h3>

<pre><code class="language-R">educ &lt;- sample(c(1, 2), 200, replace = TRUE, prob = c(0.3, 0.7))
educ &lt;- factor(educ, levels = c(1, 2), labels = c("Low", "High"))
opinion &lt;- sample(c(1, 2, 9), 200, replace = TRUE,
                 prob = c(0.4, 0.55, 0.05))
opinion &lt;- factor(opinion, levels = c(1, 2, 9),
                 labels = c("Disagree", "Agree", "Don't know"))
attr(educ, "label") &lt;- "Education level"
attr(opinion, "label") &lt;- "Opinion"
weight &lt;- sample(c(10, 15, 19), 200, replace = TRUE)

crosstab(opinion, educ, xlab = "Education", ylab = "Opinion")
ct &lt;- crosstab(opinion, educ, weight,
               dnn = c("Opinion", "Education"),
               user.missing.dep = "Don't know",
               expected = TRUE, prop.c = TRUE, prop.r = TRUE,
               plot = FALSE)
ct
plot(ct, inv.y = TRUE)

# Get the table of observed values as an object of class "table"
tab &lt;- ct$tab
class(tab)
tab

# Get the complete cross table as "matrix"
complete.tab &lt;- descr:::CreateNewTab(ct)
class(complete.tab)
complete.tab

## xtable support
library(xtable)

# Print ugly table
print(xtable(ct))

# Print pretty table
# Add to the preamble of your Rnoweb document:
# \usepackage{booktabs}
# \usepackage{multirow}
# \usepackage{dcolumn}
# \newcolumntype{d}{D{.}{.}{-1}}
print(xtable(ct, align = "llddd", multirow = TRUE, hline = TRUE,
             row.labels = TRUE, percent = FALSE,
             caption = "Opinion according to level of education"),
      booktabs = TRUE, include.rownames = FALSE,
      sanitize.text.function = function(x) x)
</code></pre>


</div>