<div class="container">

<table style="width: 100%;"><tr>
<td>dfl_decompose_estimate</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Estimate the DFL reweighting decomposition</h2>

<h3>Description</h3>

<p>This function performs the DFL decomposition. It derives the
reweighting factors, estimates the distributional statistics and
calculates the decomposition terms.
</p>


<h3>Usage</h3>

<pre><code class="language-R">dfl_decompose_estimate(
  formula,
  dep_var,
  data_used,
  weights,
  group_variable,
  reference_group,
  method,
  estimate_statistics,
  statistics,
  probs,
  custom_statistic_function,
  right_to_left,
  trimming,
  trimming_threshold,
  return_model,
  estimate_normalized_difference,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p><code>formula</code> object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dep_var</code></td>
<td>
<p>dependent variable</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data_used</code></td>
<td>
<p><code>data.frame</code> with data used for estimation</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights</code></td>
<td>
<p>weights variable</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>group_variable</code></td>
<td>
<p>group variable</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reference_group</code></td>
<td>
<p>reference_group to be reweighted</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>method used to estimate conditional probabilities</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>estimate_statistics</code></td>
<td>
<p>boolean: if <code>TRUE</code> (default), then distributional
statistics are estimated and the decomposition is performed. If <code>FALSE</code>,
the function only returns the fitted inverse propensity weights.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>statistics</code></td>
<td>
<p>a character vector that defines the distributional statistics
for which the decomposition is performed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>probs</code></td>
<td>
<p>a vector of length 1 or more with the probabilities of the quantiles
to be estimated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>custom_statistic_function</code></td>
<td>
<p>a function estimating a custom distributional statistic
that will be decomposed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>right_to_left</code></td>
<td>
<p>determines the direction of a sequential decomposition.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trimming</code></td>
<td>
<p>boolean: If <code>TRUE</code>, observations with dominant reweighting factor
values are trimmed according to rule of Huber, Lechner, and Wunsch (2013).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trimming_threshold</code></td>
<td>
<p>numeric: threshold defining the maximal accepted
relative weight of the reweighting factor value (i.e., inverse probability weight)
of a single observation. If <code>NULL</code>, the threshold is set to <code class="reqn">sqrt(N)/N</code>,
where <code class="reqn">N</code> is the number of observations in the reference group.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>return_model</code></td>
<td>
<p>boolean: If <code>TRUE</code> (default), the object(s) of the model
fit(s) used to predict the conditional probabilities for the reweighting factor(s)
are returned.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>estimate_normalized_difference</code></td>
<td>
<p>boolean: If <code>TRUE</code> (default), the
normalized differences between the covariate means of the comparison group and the
reweighted reference group are calculated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>other parameters passed to the function estimating the conditional probabilities.</p>
</td>
</tr>
</table>
</div>