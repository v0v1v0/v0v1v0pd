<div class="container">

<table style="width: 100%;"><tr>
<td>doctest-tag</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Start a doctest</h2>

<h3>Description</h3>

<p><code style="white-space: pre;">⁠@doctest⁠</code> starts a doctest: a code example that also contains one or more
testthat expectations.
</p>


<h3>Details</h3>

<p>Use <code style="white-space: pre;">⁠@doctest⁠</code> where you would usually use <code style="white-space: pre;">⁠@examples⁠</code>. Then add
@expect and @expectRaw tags beneath it to create expectations.
</p>
<p>By default, a test labelled "Example: &lt;object name&gt;" is created. You
can put a different label after <code style="white-space: pre;">⁠@doctest⁠</code>:
</p>
<div class="sourceCode"><pre>#' @doctest Positive numbers
#'
#' x &lt;- 1
#' @expect equal(x)
#' abs(x)
#'
#' @doctest Negative numbers
#' x &lt;- -1
#' @expect equal(-x)
#' abs(x)
</pre></div>
<p>You can have more than one <code style="white-space: pre;">⁠@doctest⁠</code> tag in a roxygen block. Each doctest
will create a new test, but they will all be merged into a single Rd example.
Each doctest must contain an independent unit of code. For example, this
won't work:
</p>
<div class="sourceCode"><pre>#' @doctest Test x
#' @expect equal(2)
#' x &lt;- 1 + 1
#'
#' @doctest Keep testing x
#' @expect equal(4)
#' x^2
#' # Test will error, because `x` has not been defined here
</pre></div>
<p>A test will only be written if the <code style="white-space: pre;">⁠@doctest⁠</code> section has at least one
@expect or @expectRaw in it. This lets you change <code style="white-space: pre;">⁠@examples⁠</code> to
<code style="white-space: pre;">⁠@doctest⁠</code> in your code, without generating unexpected tests.
</p>


</div>