<div class="container">

<table style="width: 100%;"><tr>
<td>count_subgroup</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Add a subgroup count to the dtrackr history graph</h2>

<h3>Description</h3>

<p>A frequent use case for more detailed description is to have a subgroup count
within a flowchart. This works best for factor subgroup columns but other
data will be converted to a factor automatically. The count of the items in
each subgroup is added as a new stage in the flowchart.
</p>


<h3>Usage</h3>

<pre><code class="language-R">count_subgroup(
  .data,
  .subgroup,
  ...,
  .messages = .defaultCountSubgroup(),
  .headline = .defaultHeadline(),
  .type = "info",
  .asOffshoot = FALSE,
  .tag = NULL,
  .maxsubgroups = .defaultMaxSupportedGroupings()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>.data</code></td>
<td>
<p>a dataframe which may be grouped</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.subgroup</code></td>
<td>
<p>a column with a small number of levels (e.g. a factor)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>passed to <code style="white-space: pre;">⁠base::factor(subgroup values, ...)⁠</code> to allow reordering
of levels etc.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.messages</code></td>
<td>
<p>a character vector of glue specifications. A glue
specification can refer to anything from the calling environment,
.subgroup for the subgroup column name and {.name} for the subgroup
column value, {.count} for the subgroup column count, {.subtotal} for
the current stratification grouping count and {.total} for the whole
dataset count</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.headline</code></td>
<td>
<p>a glue specification which can refer to grouping variables
of .data, {.subtotal} for the current grouping count, or any variables
defined in the calling environment</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.type</code></td>
<td>
<p>one of "info","exclusion": used to define formatting</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.asOffshoot</code></td>
<td>
<p>do you want this comment to be an offshoot of the main
flow (default = FALSE).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.tag</code></td>
<td>
<p>if you want to use the summary data from this step in the future
then give it a name with .tag.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.maxsubgroups</code></td>
<td>
<p>the maximum number of discrete values allowed in
.subgroup is configurable with
<code>options("dtrackr.max_supported_groupings"=XX)</code>. The default is 16. Large
values produce unwieldy flow charts.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>the same .data dataframe with the history graph updated with a
subgroup count as a new stage
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(dplyr)
library(dtrackr)
survival::cgd %&gt;% track() %&gt;% group_by(treat) %&gt;%
  count_subgroup(center) %&gt;% history()
</code></pre>


</div>