<div class="container">

<table style="width: 100%;"><tr>
<td>Crosstable</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Crosstable plot
</h2>

<h3>Description</h3>

<p>Presents a heatmap with values and a cross table of given Data matrix of two features and a bin width or percentualized values. In this approach the bin width is fixes. A more general way to approach this is the kernel density estimation plot of <code>PDEscatter</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">Crosstable(Data, xbins = seq(0, 100, 5), ybins = xbins, 

NormalizationFactor = 1, PlotIt = TRUE, main='Cross Table',

PlotText=TRUE,TextDigits=0,TextProbs=c(0.05,0.95))
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>Data</code></td>
<td>

<p>[1:n,1:2] matrix of two features from which the cross table should be generated from
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xbins</code></td>
<td>

<p>[1:k] start of k bins as a vector generated with <code>seq</code> of the first feature of data. Default setting assumes percentiled values between zero and 100.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ybins</code></td>
<td>

<p>[1:k] start of k bins as a vector generated with <code>seq</code> of the second feature of data. Normally the same for both features, other settings are only possible if the length <code>k</code> is equal.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>NormalizationFactor</code></td>
<td>

<p>Optional, Data feautures can be seen as regular time series, e.g. 1 measurement for a minute, in this case it is useful to normalize the output, e.g. to hours, then <code>NormalizationFactor=60</code>
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>PlotIt</code></td>
<td>

<p>Optional, Plots the heatmap if <code>TRUE</code>.
The first feature is on the x-axis (left to right) and the second on y-axis (bottom to top).
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>main</code></td>
<td>

<p>In case of for <code>PlotIt=TRUE</code>: title of plot, see <code>title</code>
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>PlotText</code></td>
<td>

<p>In case of for <code>PlotIt=TRUE</code>: Default TRUE: plots text in heatmap with the values of the crosstable
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>TextDigits</code></td>
<td>

<p>In case of for <code>TextDigits=TRUE</code>: integer indicating the number of decimal places to use in <code>round</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>TextProbs</code></td>
<td>

<p>In case of for <code>TextDigits=TRUE</code>: [1:2] numeric vector of two probabilities defining the thresholds for white text to grey text and grey text to black text, e.g. below the first threshold (Default 0.05) all values (5% of values) will be printed in white because the lowest values of the heatmap are blue. The second value of 0.95 works well if cross table  has many  zeros; uses <code>quantile</code> internally.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The interval in each bin is closed to the left and opened to the right. The cross table can be seen as a two-dimensional histogram. The idea to add histograms to the table is taken from [Charpentier. 2014].
</p>


<h3>Value</h3>

<p>The cross table in <code>invisible</code> mode which depicts the number of values (frequency) in an specific range with regard to two features. 
</p>
<p>The first feature is on the x-axis (left to right), and the second on y-axis (top to bottom) contrary to the plot where it is bottom to top.
</p>


<h3>Note</h3>

<p>For non percentiled values the <code>PlotText</code> part does not seem always to work, but I currently dont know why the text does not always overlap with the heatmap. 
</p>


<h3>Author(s)</h3>

<p>Michael Thrun
</p>


<h3>References</h3>

<p>[Charpentier. 2014]  Charpentier, Arthur, ed. Computational actuarial science with R. CRC Press, 2014.
</p>


<h3>See Also</h3>

<p><code>table</code>, <code>image</code>, <code>PDEscatter</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">data(ITS)
data(MTY)
#simple but not a good transformation
Data=(cbind(ITS/max(ITS),MTY/max(MTY)))*100
#choice for bins could be better
Crosstable(Data)
</code></pre>


</div>