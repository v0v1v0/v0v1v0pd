<div class="container">

<table style="width: 100%;"><tr>
<td>manipulate_initial_data</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Pre-process transactions and market prices data frames</h2>

<h3>Description</h3>

<p>These functions allows to pre-process transactions
and market prices data frames performing aggregation and
subsetting operations.
</p>


<h3>Usage</h3>

<pre><code class="language-R">aggregate_transactions(portfolio_transactions, unit = "1 mins")

reduce_transactions(portfolio_transactions, unit = "1 mins")

clean_transactions(portfolio_transactions, unit = "1 mins", reduce = FALSE)

aggregate_market_prices(market_prices, unit = NULL, aggregate_price_fun = mean)

subset_market_prices(
  market_prices,
  portfolio_assets,
  portfolio_datetimes,
  unit = NULL
)

generate_data(
  portfolio_transactions,
  market_prices,
  investor_name = NULL,
  unit = NULL,
  subset = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>portfolio_transactions</code></td>
<td>
<p>Data frame. The investor's transactions data frame.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>unit</code></td>
<td>
<p>Character string specifying a time unit or a multiple of a
unit to be rounded to. Valid base units are second, minute, hour, day,
week, etc. See <code>lubridate::round_date</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reduce</code></td>
<td>
<p>Logical. If TRUE use <code>reduce_transactions</code>, otherwise use
<code>aggregate_transactions</code> to aggregate portfolio transactions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>market_prices</code></td>
<td>
<p>Data frame containing the market prices.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>aggregate_price_fun</code></td>
<td>
<p>Function to use to aggregate prices within
the round unit. Default to <code>mean</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>portfolio_assets</code></td>
<td>
<p>Character vector of the transaction assets.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>portfolio_datetimes</code></td>
<td>
<p>POSIXct vector of the transaction datetimes.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>investor_name</code></td>
<td>
<p>Character. The name to be assigned to the investor.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subset</code></td>
<td>
<p>Logical. If TRUE, <code>subset_market_prices</code> is used to generate
investor's data.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A modified version of the input data frame.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>aggregate_transactions</code>: Aggregate the data frame of investors'
transactions that happened at the same datetime.
</p>
</li>
<li> <p><code>reduce_transactions</code>: Reduce the data frame of investors'
transactions by aggregating those transactions that happened within
a time interval.
</p>
</li>
<li> <p><code>clean_transactions</code>: Clean the data frame of investors'
transactions.
</p>
</li>
<li> <p><code>aggregate_market_prices</code>: Aggregate the data frame of market prices
with a specific aggregate function within a time interval.
</p>
</li>
<li> <p><code>subset_market_prices</code>: Subset the data frame of market prices
based on investor's traded assets and datetimes of transactions.
</p>
</li>
<li> <p><code>generate_data</code>: Generate investors' data from transactions
and market prices.
</p>
</li>
</ul>
<h3>See Also</h3>

<p><code>closest_market_price</code>,
<code>lubridate::round_date</code>
</p>


</div>