<div class="container">

<table style="width: 100%;"><tr>
<td>optimal_multiple_normal</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Optimal phase II/III drug development planning for programs with multiple
normally distributed endpoints</h2>

<h3>Description</h3>

<p>The function <code>optimal_multiple_normal</code> of the drugdevelopR
package enables planning of phase II/III drug development programs with
optimal sample size allocation and go/no-go decision rules for two-arm
trials with two normally  distributed endpoints and one control group
(Preussler et. al, 2019).
</p>


<h3>Usage</h3>

<pre><code class="language-R">optimal_multiple_normal(
  Delta1,
  Delta2,
  in1,
  in2,
  sigma1,
  sigma2,
  n2min,
  n2max,
  stepn2,
  kappamin,
  kappamax,
  stepkappa,
  alpha,
  beta,
  c2,
  c3,
  c02,
  c03,
  K = Inf,
  N = Inf,
  S = -Inf,
  steps1 = 0,
  stepm1 = 0.5,
  stepl1 = 0.8,
  b1,
  b2,
  b3,
  rho,
  fixed,
  relaxed = FALSE,
  num_cl = 1
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>Delta1</code></td>
<td>
<p>assumed true treatment effect for endpoint 1 measured as the
difference in means</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Delta2</code></td>
<td>
<p>assumed true treatment effect for endpoint 2 measured as the
difference in means</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>in1</code></td>
<td>
<p>amount of information for Delta1 in terms of number of events</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>in2</code></td>
<td>
<p>amount of information for Delta2 in terms of number of events</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sigma1</code></td>
<td>
<p>variance of endpoint 1</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sigma2</code></td>
<td>
<p>variance of endpoint 2</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n2min</code></td>
<td>
<p>minimal total sample size in phase II, must be divisible by 3</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n2max</code></td>
<td>
<p>maximal total sample size in phase II, must be divisible by 3</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stepn2</code></td>
<td>
<p>stepsize for the optimization over n2, must be divisible by 3</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>kappamin</code></td>
<td>
<p>minimal threshold value kappa for the go/no-go decision rule</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>kappamax</code></td>
<td>
<p>maximal threshold value  kappa for the go/no-go decision rule</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stepkappa</code></td>
<td>
<p>step size for the optimization over the threshold value kappa</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>one-sided significance level/family-wise error rate</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>beta</code></td>
<td>
<p>type-II error rate for any pair, i.e. <code>1 - beta</code> is the (any-pair) power for calculation of the sample size for phase III</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>c2</code></td>
<td>
<p>variable per-patient cost for phase II in 10^5 $</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>c3</code></td>
<td>
<p>variable per-patient cost for phase III in 10^5 $</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>c02</code></td>
<td>
<p>fixed cost for phase II in 10^5 $</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>c03</code></td>
<td>
<p>fixed cost for phase III in 10^5 $</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>K</code></td>
<td>
<p>constraint on the costs of the program, default: Inf, e.g. no constraint</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>N</code></td>
<td>
<p>constraint on the total expected sample size of the program, default: Inf, e.g. no constraint</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>S</code></td>
<td>
<p>constraint on the expected probability of a successful program, default: -Inf, e.g. no constraint</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>steps1</code></td>
<td>
<p>lower boundary for effect size category "small", default: 0</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stepm1</code></td>
<td>
<p>lower boundary for effect size category "medium" = upper boundary for effect size category "small" default: 0.5</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stepl1</code></td>
<td>
<p>lower boundary for effect size category "large" = upper boundary for effect size category "medium", default: 0.8</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>b1</code></td>
<td>
<p>expected gain for effect size category "small" in 10^5 $</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>b2</code></td>
<td>
<p>expected gain for effect size category "medium" in 10^5 $</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>b3</code></td>
<td>
<p>expected gain for effect size category "large" in 10^5 $</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rho</code></td>
<td>
<p>correlation between the two endpoints</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fixed</code></td>
<td>
<p>assumed fixed treatment effect</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>relaxed</code></td>
<td>
<p>relaxed or strict decision rule</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>num_cl</code></td>
<td>
<p>number of clusters used for parallel computing, default: 1</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>For this setting, the drug development program is defined to be successful
if it proceeds from phase II to phase III and all endpoints show a
statistically significant treatment effect in phase III. For example, this
situation is found in Alzheimer’s disease trials, where a drug should show
significant results in improving cognition (cognitive endpoint) as well as
in improving activities of daily living (functional endpoint).
</p>
<p>The effect size categories small, medium and large are applied to both
endpoints. In order to define an overall effect size from the two individual
effect sizes, the function implements two different combination rules:
</p>

<ul>
<li>
<p> A strict rule (<code>relaxed = FALSE</code>) assigning a large overall effect in case
both endpoints show an effect of large size, a small overall effect in
case that at least one of the endpoints shows a small effect, and a medium
overall effect otherwise, and
</p>
</li>
<li>
<p> A relaxed rule (<code>relaxed = TRUE</code>) assigning a large overall effect if at
least one of the endpoints shows a large effect, a small effect if both
endpoints show a  small effect, and a medium overall effect otherwise.
</p>
</li>
</ul>
<p>Fast computing is enabled by parallel programming.
</p>
<p>Monte Carlo simulations are applied for calculating utility, event count and
other operating characteristics in this setting. Hence, the results are affected
by random uncertainty.
</p>


<h3>Value</h3>

<p>The output of the function is a <code>data.frame</code> object containing the optimization results:
</p>
<dl>
<dt>u</dt>
<dd>
<p>maximal expected utility under the optimization constraints, i.e. the expected utility of the optimal sample size and threshold value</p>
</dd>
<dt>Kappa</dt>
<dd>
<p>optimal threshold value for the decision rule to go to phase III</p>
</dd>
<dt>n2</dt>
<dd>
<p>total sample size for phase II; rounded to the next even natural number</p>
</dd>
<dt>n3</dt>
<dd>
<p>total sample size for phase III; rounded to the next even natural number</p>
</dd>
<dt>n</dt>
<dd>
<p>total sample size in the program; n = n2 + n3</p>
</dd>
<dt>K</dt>
<dd>
<p>maximal costs of the program (i.e. the cost constraint, if it is set or the sum K2+K3 if no cost constraint is set)</p>
</dd>
<dt>pgo</dt>
<dd>
<p>probability to go to phase III</p>
</dd>
<dt>sProg</dt>
<dd>
<p>probability of a successful program</p>
</dd>
<dt>sProg1</dt>
<dd>
<p>probability of a successful program with "small" treatment effect in phase III</p>
</dd>
<dt>sProg2</dt>
<dd>
<p>probability of a successful program with "medium" treatment effect in phase III</p>
</dd>
<dt>sProg3</dt>
<dd>
<p>probability of a successful program with "large" treatment effect in phase III</p>
</dd>
<dt>K2</dt>
<dd>
<p>expected costs for phase II</p>
</dd>
<dt>K3</dt>
<dd>
<p>expected costs for phase III</p>
</dd>
</dl>
<p>and further input parameters. Taking <code>cat(comment())</code> of the
data frame lists the used optimization sequences, start and
finish date of the optimization procedure.
</p>


<h3>References</h3>

<p>Meinhard Kieser, Marietta Kirchner, Eva Dölger, Heiko Götte (2018). Optimal planning of phase II/III programs for clinical trials with multiple endpoints
</p>
<p>IQWiG (2016). Allgemeine Methoden. Version 5.0, 10.07.2016, Technical Report. Available at <a href="https://www.iqwig.de/ueber-uns/methoden/methodenpapier/">https://www.iqwig.de/ueber-uns/methoden/methodenpapier/</a>, assessed last 15.05.19.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Activate progress bar (optional)
## Not run: progressr::handlers(global = TRUE)
# Optimize

set.seed(123) # This function relies on Monte Carlo integration
optimal_multiple_normal(Delta1 = 0.75,
  Delta2 = 0.80, in1=300, in2=600,                   # define assumed true HRs
  sigma1 = 8, sigma2= 12,                            # variances for both endpoints
  n2min = 30, n2max = 90, stepn2 = 10,               # define optimization set for n2
  kappamin = 0.05, kappamax = 0.2, stepkappa = 0.05, # define optimization set for HRgo
  alpha = 0.025, beta = 0.1,                         # planning parameters
  c2 = 0.75, c3 = 1, c02 = 100, c03 = 150,           # fixed/variable costs: phase II/III
  K = Inf, N = Inf, S = -Inf,                        # set constraints
  steps1 = 0,                                        # define lower boundary for "small"
  stepm1 = 0.5,                                      # "medium"
  stepl1 = 0.8,                                      # and "large" effect size categories
  b1 = 1000, b2 = 2000, b3 = 3000,                   # define expected benefit
  rho = 0.5, relaxed = TRUE,                         # strict or relaxed rule
  fixed = TRUE,                                      # treatment effect
  num_cl = 1)                                        # parallelized computing
  

</code></pre>


</div>