<div class="container">

<table style="width: 100%;"><tr>
<td>link_dam_metadata</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Link DAM2 or DAM5 metadata to result files</h2>

<h3>Description</h3>

<p>This function checks and add columns to DAMS metadata.
This way, it can subsequently be loaded (via load_dam).
</p>


<h3>Usage</h3>

<pre><code class="language-R">link_dam_metadata(x, result_dir)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>object such as a data.frame, or the name of a file (see detail)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>result_dir</code></td>
<td>
<p>the root directory where all daily data are saved</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>These function will augment metadata from two different types of inputs:
</p>

<ol>
<li>
<p> A data.frame (recommended)
In this case, the function will try to match requested data with data available on <code>result_dir</code>.
The provided data.frame or data.table has typically one row per requested individual and the columns
(not necessarily in this order):
</p>

<ul>
<li> <p><code>file</code> – the name of a data file (e.g. <code>"Monitor3.txt"</code>), it has to exists in result_dir.
</p>
</li>
<li> <p><code>start_datetime</code> – the first day <strong>and time</strong> of the requested experiment (e.g. <code>"2014-12-28 18:00:00"</code>).
</p>
</li>
<li> <p><code>stop_datetime</code> – the last day and time of the requested experiment (e.g. <code>"2014-12-30  19:00:00"</code> or simply <code>"2014-12-30"</code>).
</p>
</li>
<li> <p><code>region_id</code> – the channel (between 1 and 32) in which the animal was in (e.g. <code>20</code>).
<code>region_id</code> is optional. If not provided, all 32 channels are loaded <em>with the same conditions</em>.
</p>
</li>
<li> <p><code style="white-space: pre;">⁠???⁠</code> <em>any number of arbitrary columns</em> to associate <code>conditions</code>/<code>treatments</code>/<code>genotypes</code>/... to the previous columns.
</p>
</li>
</ul>
</li>
<li>
<p> The name of a CSV file that contains a table as described in <code>1</code>.
</p>
</li>
</ol>
<p>The time in data is expressed relatively to start_date.
In other words, if you do circadian analysis, and your <code>D -&gt; L</code> transitions are at 09:00:00,
you want to set <code>start_datetime = "YYY-MM-DD 09:00:00"</code>.
The <code style="white-space: pre;">⁠result_directory`` is the folder conraining all result (.txt) files (for instance, ⁠</code>result_dir = "C:/where/I/Store/my/txt/files/"')
</p>


<h3>Value</h3>

<p>a data.table::data.table with the same rows as x, and extra columns used for further data loading
</p>


<h3>References</h3>


<ul>
<li> <p><a href="https://rethomics.github.io/workflow.html">the rethomics workflow</a> – on the concept of "linking"
</p>
</li>
<li> <p><a href="https://rethomics.github.io/metadata.html">metadata tutorial</a> – how to work with metadata
</p>
</li>
</ul>
<h3>See Also</h3>


<ul><li> <p>load_dam – to subsequently load the actual data
</p>
</li></ul>
</div>