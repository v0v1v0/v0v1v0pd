<div class="container">

<table style="width: 100%;"><tr>
<td>portfolio_compute</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Portfolio Compute</h2>

<h3>Description</h3>

<p>Computation of all the transaction updates and the
realized and paper gains and losses for each assets.
</p>


<h3>Usage</h3>

<pre><code class="language-R">portfolio_compute(
  portfolio_transactions,
  market_prices,
  method = "count",
  allow_short = TRUE,
  time_threshold = "0 mins",
  exact_market_prices = TRUE,
  portfolio_driven_DE = FALSE,
  time_series_DE = FALSE,
  assets_time_series_DE = NULL,
  verbose = c(0, 0),
  progress = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>portfolio_transactions</code></td>
<td>
<p>Data frame. The investor's transactions data frame.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>market_prices</code></td>
<td>
<p>Data frame containing the market prices.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>Character string containing the method to use to compute
realized and paper gains and losses. If "none" nothing is computed but the
investor's portfolio updates. Otherwise it has to be one of "count" (default),
"total", "value", "duration", or "all".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>allow_short</code></td>
<td>
<p>Logical. If TRUE short positions are allowed, otherwise only
long positions are allowed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time_threshold</code></td>
<td>
<p>Character in the format "value units" indicating the
time threshold at which the computed financial difftime has to be evaluated
(for instance "05 mins" or "20 hours").
The allowed units are "secs", "mins", "hours", "days" and "weeks"
(See <code>base::difftime</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>exact_market_prices</code></td>
<td>
<p>Logical. If TRUE then <code>closest_market_price</code>
uses exact datetime match to look for the closest price of each asset.
It usually speeds up computation by a small degree, but it requires the
<code>market_prices</code> to have the prices for each transaction asset along each
transaction datetimes.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>portfolio_driven_DE</code></td>
<td>
<p>Logical. If TRUE the realized and paper gains and
losses for the positive (that is when the investor's portfolio value, as
computed through <code>evaluate_portfolio</code>, is greater than zero)
and the negative (that is when the investor's portfolio value, as computed
through <code>evaluate_portfolio</code>, is smaller than zero) portfolios
are returned.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time_series_DE</code></td>
<td>
<p>Logical. If TRUE the time series of disposition effect
is computed on 'count' and 'value' methods only.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>assets_time_series_DE</code></td>
<td>
<p>Character vector of assets' names as contained
into <code>portfolio_transactions</code> on which to compute the time series disposition
effect.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>Numeric or logical vector of length 2 that allows to control
for the function's verbosity.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>progress</code></td>
<td>
<p>Logical. If TRUE a progress bar is displayed.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A data frame containing the investor's
portfolio and the values of realized and paper gains and losses
computed by means of the chosen method on each portfolio assets.
</p>
<p>If time_series_DE is set to TRUE, then also time series disposition effect
results are returned.
</p>


<h3>See Also</h3>

<p><code>realized_compute</code>, <code>paper_compute</code>,
<code>gains_losses</code>
</p>


</div>