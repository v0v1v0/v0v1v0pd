<div class="container">

<table style="width: 100%;"><tr>
<td>map_text_regex</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Map text to character table (allowing for matching patterns).</h2>

<h3>Description</h3>

<p><code>map_text_regex</code> parses text (from a file or user input) 
into a data frame that contains a row for each 
character of <code>x</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">map_text_regex(
  x = NA,
  file = "",
  lbl_hi = NA,
  lbl_lo = NA,
  bg_hi = NA,
  bg_lo = "[[:space:]]",
  lbl_rotate = NA,
  case_sense = TRUE,
  lbl_tiles = TRUE,
  col_lbl = "black",
  col_lbl_hi = pal_ds4psy[[1]],
  col_lbl_lo = pal_ds4psy[[9]],
  col_bg = pal_ds4psy[[7]],
  col_bg_hi = pal_ds4psy[[4]],
  col_bg_lo = "white",
  col_sample = FALSE,
  rseed = NA,
  angle_fg = c(-90, 90),
  angle_bg = 0
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>The text to map or plot (as a character vector). 
Different elements denote different lines of text. 
If <code>x = NA</code> (as per default), 
the <code>file</code> argument is used to read 
a text file or user input from the Console.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>file</code></td>
<td>
<p>A text file to read (or its path). 
If <code>file = ""</code> (as per default), 
<code>scan</code> is used to read user input from the Console. 
If a text file is stored in a sub-directory, 
enter its path and name here (without any leading or 
trailing "." or "/").</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lbl_hi</code></td>
<td>
<p>Labels to highlight (as regex). 
Default: <code>lbl_hi = NA</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lbl_lo</code></td>
<td>
<p>Labels to de-emphasize (as regex). 
Default: <code>lbl_lo = NA</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bg_hi</code></td>
<td>
<p>Background tiles to highlight (as regex). 
Default: <code>bg_hi = NA</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bg_lo</code></td>
<td>
<p>Background tiles to de-emphasize (as regex). 
Default: <code>bg_lo = "[[:space:]]"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lbl_rotate</code></td>
<td>
<p>Labels to rotate (as regex). 
Default: <code>lbl_rotate = NA</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>case_sense</code></td>
<td>
<p>Boolean: Distinguish 
lower- vs. uppercase characters in pattern matches? 
Default: <code>case_sense = TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lbl_tiles</code></td>
<td>
<p>Are character labels shown? 
This enables pattern matching for (fg) color and 
angle aesthetics. 
Default: <code>lbl_tiles = TRUE</code> (i.e., show labels).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col_lbl</code></td>
<td>
<p>Default color of text labels.
Default: <code>col_lbl = "black"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col_lbl_hi</code></td>
<td>
<p>Highlighting color of text labels.
Default: <code>col_lbl_hi = pal_ds4psy[[1]]</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col_lbl_lo</code></td>
<td>
<p>De-emphasizing color of text labels.
Default: <code>col_lbl_lo = pal_ds4psy[[9]]</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col_bg</code></td>
<td>
<p>Default color to fill background tiles.
Default: <code>col_bg = pal_ds4psy[[7]]</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col_bg_hi</code></td>
<td>
<p>Highlighting color to fill background tiles.
Default: <code>col_bg_hi = pal_ds4psy[[4]]</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col_bg_lo</code></td>
<td>
<p>De-emphasizing color to fill background tiles.
Default: <code>col_bg_lo = "white"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col_sample</code></td>
<td>
<p>Boolean: Sample color vectors (within category)?
Default: <code>col_sample = FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rseed</code></td>
<td>
<p>Random seed (number).
Default: <code>rseed = NA</code> (using random seed).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>angle_fg</code></td>
<td>
<p>Angle(s) for rotating character labels 
matching the pattern of the <code>lbl_rotate</code> expression. 
Default: <code>angle_fg = c(-90, 90)</code>. 
If <code>length(angle_fg) &gt; 1</code>, a random value 
in uniform <code>range(angle_fg)</code> is used for every character.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>angle_bg</code></td>
<td>
<p>Angle(s) of rotating character labels 
not matching the pattern of the <code>lbl_rotate</code> expression. 
Default: <code>angle_bg = 0</code> (i.e., no rotation). 
If <code>length(angle_bg) &gt; 1</code>, a random value 
in uniform <code>range(angle_bg)</code> is used for every character.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>map_text_regex</code> allows for regular expression (regex) 
to match text patterns and create corresponding variables 
(e.g., for color or orientation). 
</p>
<p>Five regular expressions and corresponding 
color and angle arguments allow identifying, 
marking (highlighting or de-emphasizing), and rotating 
those sets of characters (i.e, their text labels or fill colors).
that match the provided patterns. 
</p>
<p>The plot generated by <code>plot_chars</code> is character-based: 
Individual characters are plotted at equidistant x-y-positions 
and the aesthetic settings provided for text labels and tile fill colors.
</p>
<p><code>map_text_regex</code> returns a plot description (as a data frame). 
Using this output as an input to <code>plot_charmap</code> plots 
text in a character-based fashion (i.e., individual characters are 
plotted at equidistant x-y-positions). 
Together, both functions replace the over-specialized 
<code>plot_chars</code> and <code>plot_text</code> functions.
</p>


<h3>Value</h3>

<p>A data frame describing a plot.
</p>


<h3>See Also</h3>

<p><code>map_text_coord</code> for mapping text to a table of character coordinates; 
<code>plot_charmap</code> for plotting character maps; 
<code>plot_chars</code> for creating and plotting character maps; 
<code>plot_text</code> for plotting characters and color tiles by frequency; 
<code>read_ascii</code> for reading text inputs into a character string.
</p>
<p>Other text objects and functions: 
<code>Umlaut</code>,
<code>capitalize()</code>,
<code>caseflip()</code>,
<code>cclass</code>,
<code>chars_to_text()</code>,
<code>collapse_chars()</code>,
<code>count_chars_words()</code>,
<code>count_chars()</code>,
<code>count_words()</code>,
<code>invert_rules()</code>,
<code>l33t_rul35</code>,
<code>map_text_chars()</code>,
<code>map_text_coord()</code>,
<code>metachar</code>,
<code>read_ascii()</code>,
<code>text_to_chars()</code>,
<code>text_to_sentences()</code>,
<code>text_to_words()</code>,
<code>transl33t()</code>,
<code>words_to_text()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## (1) From text string(s): 
ts &lt;- c("Hello world!", "This is a test to test this splendid function",
        "Does this work?", "That's good.", "Please carry on.")
sum(nchar(ts))

# (a) simple use:
map_text_regex(ts) 

# (b) matching patterns (regex):
map_text_regex(ts, lbl_hi = "\\b\\w{4}\\b", bg_hi = "[good|test]",
               lbl_rotate = "[^aeiou]", angle_fg = c(-45, +45))

## (2) From user input:
# map_text_regex()  # (enter text in Console)
 
## (3) From text file:
# cat("Hello world!", "This is a test file.",
#     "Can you see this text?",
#     "Good! Please carry on...",
#     file = "test.txt", sep = "\n")
# 
# map_text_regex(file = "test.txt")  # default
# map_text_regex(file = "test.txt", lbl_hi = "[[:upper:]]", lbl_lo = "[[:punct:]]",
#                col_lbl_hi = "red", col_lbl_lo = "blue")
# 
# map_text_regex(file = "test.txt", lbl_hi = "[aeiou]", col_lbl_hi = "red",
#                col_bg = "white", bg_hi = "see")  # mark vowels and "see" (in bg)
# map_text_regex(file = "test.txt", bg_hi = "[aeiou]", col_bg_hi = "gold")  # mark (bg of) vowels
# 
# # Label options:
# map_text_regex(file = "test.txt", bg_hi = "see", lbl_tiles = FALSE)
# map_text_regex(file = "test.txt", angle_bg = c(-20, 20))
# 
# unlink("test.txt")  # clean up (by deleting file). 

</code></pre>


</div>