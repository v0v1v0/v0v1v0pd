<div class="container">

<table style="width: 100%;"><tr>
<td>filter_all</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Filter within a selection of variables</h2>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#superseded"><img src="../help/figures/lifecycle-superseded.svg" alt="[Superseded]"></a>
</p>
<p>Scoped verbs (<code style="white-space: pre;">⁠_if⁠</code>, <code style="white-space: pre;">⁠_at⁠</code>, <code style="white-space: pre;">⁠_all⁠</code>) have been superseded by the use of
<code>if_all()</code> or <code>if_any()</code> in an existing verb. See <code>vignette("colwise")</code> for
details.
</p>
<p>These scoped filtering verbs apply a predicate expression to a
selection of variables. The predicate expression should be quoted
with <code>all_vars()</code> or <code>any_vars()</code> and should mention the pronoun
<code>.</code> to refer to variables.
</p>


<h3>Usage</h3>

<pre><code class="language-R">filter_all(.tbl, .vars_predicate, .preserve = FALSE)

filter_if(.tbl, .predicate, .vars_predicate, .preserve = FALSE)

filter_at(.tbl, .vars, .vars_predicate, .preserve = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>.tbl</code></td>
<td>
<p>A <code>tbl</code> object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.vars_predicate</code></td>
<td>
<p>A quoted predicate expression as returned by
<code>all_vars()</code> or <code>any_vars()</code>.
</p>
<p>Can also be a function or purrr-like formula. In this case, the
intersection of the results is taken by default and there's
currently no way to request the union.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.preserve</code></td>
<td>
<p>when <code>FALSE</code> (the default), the grouping structure
is recalculated based on the resulting data, otherwise it is kept as is.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.predicate</code></td>
<td>
<p>A predicate function to be applied to the columns
or a logical vector. The variables for which <code>.predicate</code> is or
returns <code>TRUE</code> are selected. This argument is passed to
<code>rlang::as_function()</code> and thus supports quosure-style lambda
functions and strings representing function names.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.vars</code></td>
<td>
<p>A list of columns generated by <code>vars()</code>,
a character vector of column names, a numeric vector of column
positions, or <code>NULL</code>.</p>
</td>
</tr>
</table>
<h3>Grouping variables</h3>

<p>The grouping variables that are part of the selection are taken
into account to determine filtered rows.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># While filter() accepts expressions with specific variables, the
# scoped filter verbs take an expression with the pronoun `.` and
# replicate it over all variables. This expression should be quoted
# with all_vars() or any_vars():
all_vars(is.na(.))
any_vars(is.na(.))


# You can take the intersection of the replicated expressions:
filter_all(mtcars, all_vars(. &gt; 150))
# -&gt;
filter(mtcars, if_all(everything(), ~ .x &gt; 150))

# Or the union:
filter_all(mtcars, any_vars(. &gt; 150))
# -&gt;
filter(mtcars, if_any(everything(), ~ . &gt; 150))


# You can vary the selection of columns on which to apply the
# predicate. filter_at() takes a vars() specification:
filter_at(mtcars, vars(starts_with("d")), any_vars((. %% 2) == 0))
# -&gt;
filter(mtcars, if_any(starts_with("d"), ~ (.x %% 2) == 0))

# And filter_if() selects variables with a predicate function:
filter_if(mtcars, ~ all(floor(.) == .), all_vars(. != 0))
# -&gt;
is_int &lt;- function(x) all(floor(x) == x)
filter(mtcars, if_all(where(is_int), ~ .x != 0))
</code></pre>


</div>