<div class="container">

<table style="width: 100%;"><tr>
<td>shuffle_grouped_data</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Generate in one go a shuffling function that produces permutations with specific constraints on multiple sample variables and group sizes fitting one specific allocation variable</h2>

<h3>Description</h3>

<p>Generate in one go a shuffling function that produces permutations with specific constraints on multiple sample variables and group sizes fitting one specific allocation variable
</p>


<h3>Usage</h3>

<pre><code class="language-R">shuffle_grouped_data(
  batch_container,
  allocate_var,
  keep_together_vars = c(),
  keep_separate_vars = c(),
  n_min = NA,
  n_max = NA,
  n_ideal = NA,
  subgroup_var_name = NULL,
  report_grouping_as_attribute = FALSE,
  prefer_big_groups = FALSE,
  strict = TRUE,
  fullTree = FALSE,
  maxCalls = 1e+06
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>batch_container</code></td>
<td>
<p>Batch container with all samples assigned that are to be grouped and sub-grouped</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>allocate_var</code></td>
<td>
<p>Name of a variable in the <code>samples</code> table to inform possible groupings, as (sub)group sizes must add up to the correct totals</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>keep_together_vars</code></td>
<td>
<p>Vector of column names in sample table; groups are formed by pooling samples with identical values of all those variables</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>keep_separate_vars</code></td>
<td>
<p>Vector of column names in sample table; items with identical values in those variables will not be put into the same subgroup if at all possible</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_min</code></td>
<td>
<p>Minimal number of samples in one sub(!)group; by default 1</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_max</code></td>
<td>
<p>Maximal number of samples in one sub(!)group; by default the size of the biggest group</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_ideal</code></td>
<td>
<p>Ideal number of samples in one sub(!)group; by default the floor or ceiling of <code>mean(n_min,n_max)</code>, depending on the setting of <code>prefer_big_groups</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subgroup_var_name</code></td>
<td>
<p>An optional column name for the subgroups which are formed (or NULL)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>report_grouping_as_attribute</code></td>
<td>
<p>Boolean, if TRUE, add an attribute table to the permutation functions' output, to be used in scoring during the design optimization</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prefer_big_groups</code></td>
<td>
<p>Boolean; indicating whether or not bigger subgroups should be preferred in case of several possibilities</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>strict</code></td>
<td>
<p>Boolean; if TRUE, subgroup size constraints have to be met strictly, implying the possibility of finding no solution at all</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fullTree</code></td>
<td>
<p>Boolean: Enforce full search of the possibility tree, independent of the value of <code>maxCalls</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxCalls</code></td>
<td>
<p>Maximum number of recursive calls in the search tree, to avoid long run times with very large trees</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Shuffling function that on each call returns an index vector for a valid sample permutation
</p>


</div>